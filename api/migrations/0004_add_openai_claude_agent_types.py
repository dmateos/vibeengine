# Generated by Django 5.2.8 on 2025-11-23 00:39

from django.db import migrations


def add_openai_claude_agent_types(apps, schema_editor):
    NodeType = apps.get_model('api', 'NodeType')
    new_types = [
        {
            'name': 'openai_agent',
            'display_name': 'OpenAI Agent',
            'icon': 'ðŸ”µ',
            'color': '#10a37f',
            'description': 'OpenAI-powered agent node (GPT-4, GPT-3.5, etc.)',
        },
        {
            'name': 'claude_agent',
            'display_name': 'Claude Agent',
            'icon': 'ðŸŸ ',
            'color': '#d97757',
            'description': 'Anthropic Claude-powered agent node',
        },
    ]

    for item in new_types:
        NodeType.objects.update_or_create(name=item['name'], defaults=item)


def remove_openai_claude_agent_types(apps, schema_editor):
    NodeType = apps.get_model('api', 'NodeType')
    for name in ['openai_agent', 'claude_agent']:
        try:
            NodeType.objects.filter(name=name).delete()
        except Exception:
            pass


class Migration(migrations.Migration):

    dependencies = [
        ('api', '0003_seed_agent_node_types'),
    ]

    operations = [
        migrations.RunPython(add_openai_claude_agent_types, reverse_code=remove_openai_claude_agent_types),
    ]
